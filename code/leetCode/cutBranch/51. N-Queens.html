<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>N 皇后问题，n*n 的格子，相互攻击8个方向都是会攻击到，求出 皇后的放置位置</title>
  <meta name='viewport' content='width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no' />
  <meta name="description" content="">
  <meta name="keywords" content="">
  <link href="" rel="stylesheet">
</head>

<body>
  <script>
    /**
     * @param {number} n
     * @return {string[][]}
     */
    var solveNQueens = function (n) {
        if(n<1) return [];
        var col=new Set();
        var pie=new Set();
        var na=new Set();

        var result=[];
        dfs(n,0,[])

        return gen(result);

        // 把普通数组转成指定格式输出
        function gen(res){
          var result=[];
          var row;
          var item
          for(let i=0;i<res.length;i++){
            row=[];
            for(let j=0;j<res[i].length;j++){
              item=new Array(res[0].length).fill('.');
              item[res[i][j]]='Q'
              row.push(item.join(''))
            }
            result.push(row)
          }
          return result;
        }


        
        function dfs(n,i,res){
          if(i>=n){
            result.push(res);
          }
          for(let j=0;j<n;j++){
            if(col.has(j)||pie.has(i+j)||na.has(i-j)){
              continue;
            }
            col.add(j)
            pie.add(i+j)
            na.add(i-j)
            dfs(n,i+1,res.concat([j]))
            col.delete(j);
            pie.delete(i+j);
            na.delete(i-j);
          }
        }

    };

    console.log(solveNQueens(4))
  </script>
</body>

</html>